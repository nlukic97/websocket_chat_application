<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="css/style.css">

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js" defer></script>
  <script src="/socket.io/socket.io.js" defer></script>
  <script src="./script.js" defer></script>
</head>
<body>
  <div id="app">
    
    <!-- Audio files -->
    <audio id="nudge">
      <source src="./audio/nudge.mp3">
    </audio>
    <audio id="sentNudge">
      <source src="./audio/sentNudge.mp3">
    </audio>

    <main>
      <section id="chat">
        <div class="bubble" v-for="(item,index) in allMessages" v-bind:class="styleMessage(item)" v-bind:key="index">
          <h4>
            <span v-if="item.private"><em>Private from: </em></span>
            <span v-if="item.privateFromMe"><em>To {{item.messageTo}}: </em></span>
            {{item.user}}
          </h4>
          <div>
            <img :src="'./images/' + item.avatarMsg + '.jpg'"  alt="">
            <p>{{item.msg}}</p>
          </div>
          <h5 v-if="item.private" @click="sendPrivateMessage(item.user)">Reply privately</h5>
        </div>
      </section>

      <aside id="online">
        <h4>Online users</h4>
        <div class="user" :id="user.name" v-for="(user,index) in onlineUsers" :key ="index">
          <img :src="`./images/${user.avatar}.jpg`" alt="" @click="nudge(user.id)">
          <div>
            <h5>{{user.name}}</h5>
          </div>
          <svg @click="sendPrivateMessage(user.name)" id="Capa_1" enable-background="new 0 0 512.005 512.005" height="512" viewBox="0 0 512.005 512.005" width="512" xmlns="http://www.w3.org/2000/svg"><g><path d="m511.658 51.675c2.496-11.619-8.895-21.416-20.007-17.176l-482 184c-5.801 2.215-9.638 7.775-9.65 13.984-.012 6.21 3.803 11.785 9.596 14.022l135.403 52.295v164.713c0 6.948 4.771 12.986 11.531 14.593 6.715 1.597 13.717-1.598 16.865-7.843l56.001-111.128 136.664 101.423c8.313 6.17 20.262 2.246 23.287-7.669 127.599-418.357 122.083-400.163 122.31-401.214zm-118.981 52.718-234.803 167.219-101.028-39.018zm-217.677 191.852 204.668-145.757c-176.114 185.79-166.916 176.011-167.684 177.045-1.141 1.535 1.985-4.448-36.984 72.882zm191.858 127.546-120.296-89.276 217.511-229.462z"/></g></svg>
        </div>
      </aside>
    </main>
    <section id="type-area">
      <p v-if="areTyping">Typing: 
        <!-- <span v-for="(typer,index) in currentlyTyping" :key="index">
          {{typer}}
        </span> -->
        <span>
          {{this.typingMessage}}
        </span>
      </p>
      <div>
        <input id="input" v-model="inputMessage" type="text" @keyup.enter="sendMessage" @keydown="iAmTyping">
        <button @click="sendMessage">Send</button>
      </div>
    </section>
  </div>
</body>
</html>